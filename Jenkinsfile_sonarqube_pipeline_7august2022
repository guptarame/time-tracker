pipeline {
  agent any
        tools {
                  maven "MAVEN_HOME"
               }
      stages {
                stage('build') {
                                steps {
                                            git branch: 'myself', credentialsId: 'gitcredentials', url: 'https://github.com/guptarame/time-tracker.git'
                                            }
                                }
                stage('Compile') {
                                steps {
                                            bat 'mvn compile'
                                       }
                                }
                stage('unit Test') {
                                steps {
                                            bat 'mvn -Dtest=TrackerTest#testMe test -pl core'
                                       }
                                    }
                stage('Regression Test') {
                                steps {
                                            bat 'mvn -Dtest=TrackerTest test -pl core'
                                       }
                                    }
                 stage('Integration Test') {
                                steps {
                                            bat 'mvn test'
                                       }
                                    }
                 stage('Result') {
                                steps {
                                            echo 'This will display Result'
                                            junit '**/*.xml'
                                       }
                                }
                stage('package') {
                                steps {
                                            bat 'mvn package'
                                            archiveArtifacts artifacts: '**/*.war', followSymlinks: false
                                      }
                                }
                 stage('sonarqube Analysis') {
                                                steps {
                                                        def mavenHome = tool name: "MAVEN_HOME"
                                                        withSonarQubeEnv('sonarintegration20') {
                                                        bat "${mavenHome}/bin/mvn sonar:sonar"

                                                     }
                                                }
                stage('Upload The Binary_War') {
                                steps {
                                            echo 'Upload The Binary'
                                       }
                                }
                stage('Deploy The Binary_War') {
                                steps {
                                            echo 'Deploy The Binary'
                                       }
                                 }
  }
}