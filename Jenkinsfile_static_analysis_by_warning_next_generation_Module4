pipeline {
  agent any
        tools {
                  maven "MAVEN_HOME"
               }
      stages {
         stage('Smoke Tests') {
            parallel {
                stage('build') {
                                steps {
                                            git branch: 'myself', credentialsId: '5b9319da-8c4f-4392-8560-98d63bbc8bfc', url: 'https://github.com/guptarame/time-tracker.git'
                                       }
                                }
                stage('Compile') {
                                steps {
                                            sh 'mvn compile'
                                       }
                                }
                    }
                }

        stage('Node1') {
            parallel {
                 stage('Reports') {
                                                steps {
                                                            echo 'This will display Result'
                                                            junit '**/*.xml'
                                                       }
                                   }
                stage('Regression Test') {
                                steps {
                                            sh 'mvn -Dtest=TrackerTest test -pl core'
                                       }
                                    }
                        }
                 }

                 stage('Integration Test') {
                                steps {
                                            sh 'mvn test'
                                            }
                                    }


                stage('package') {
                                steps {
                                            sh 'mvn package'
                                            archiveArtifacts artifacts: '**/*.war', followSymlinks: false
                                      }
                                }

                stage('Static analysis using warning plugin') {
                                steps {
                                            echo 'this will run static analysis'
                                            recordIssues(tools: [checkStyle(), findBugs(useRankAsPriority: true), pmdParser()])
                                      }
                                }

                stage('Upload The Binary_War') {
                                steps {
                                            echo 'Upload The Binary'
                                       }
                                }
                stage('Deploy The Binary_War') {
                                steps {
                                            echo 'Deploy The Binary'
                                       }
                                 }

stage('slack notification') {
                                steps {
                                           slackSend channel: '#cicd_new', message: 'Hi Buddy, Build is success !', teamDomain: 'abc-dzz3056', tokenCredentialId: 'idtext_of_cicd_new'
                                       }
                                 }

  }
}